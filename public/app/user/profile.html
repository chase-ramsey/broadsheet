<div class="navbar navbar-fixed-top">
  <div class="container-fluid navbar-inverse">
    <div class="navbar-header">
      <a class="navbar-brand" href="#/">CODENAME MERCURY</a>
    </div>
    <form class="navbar-form navbar-left" role="search">
      <div class="form-group">
        <input type="text" class="form-control" placeholder="Search" ng-model="profile.userSearch">
      </div>
    </form>
    <ul class="nav navbar-nav">
      <li><a href="#/">Latest</a></li>
      <li ng-hide="profile.noFeeds"><a href="" ng-click="(profile.filtering = !profile.filtering)">Topics</a></li>
      <li ng-hide="profile.noFeeds"><a href="" ng-click="profile.clearFilters()">View all</a></li>
      <li ng-hide="profile.noFeeds"><a href="" ng-click="profile.loadArticles()">Refresh</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><a href="#/logout">Logout</a></li>
    </ul>
  </div>
  <div class="filters" ng-show="profile.filtering">
    <div class="container filters-content">
      <h3>Filter by topic</h3>
      <button class="btn" ng-class="profile.setTopicColor('news')" ng-click="profile.setTopicFilter('news')" ng-show="profile.checkTopics('news')">News</button>
      <button class="btn" ng-class="profile.setTopicColor('politics')" ng-click="profile.setTopicFilter('politics')" ng-show="profile.checkTopics('politics')">Politics</button>
      <button class="btn" ng-class="profile.setTopicColor('culture')" ng-click="profile.setTopicFilter('culture')" ng-show="profile.checkTopics('culture')">Culture</button>
      <button class="btn" ng-class="profile.setTopicColor('music')" ng-click="profile.setTopicFilter('music')" ng-show="profile.checkTopics('music')">Music</button>
      <button class="btn" ng-class="profile.setTopicColor('movies')" ng-click="profile.setTopicFilter('movies')" ng-show="profile.checkTopics('movies')">Movies</button>
      <button class="btn" ng-class="profile.setTopicColor('videogames')" ng-click="profile.setTopicFilter('videogames')" ng-show="profile.checkTopics('videogames')">Videogames</button>
      <button class="btn" ng-class="profile.setTopicColor('tech')" ng-click="profile.setTopicFilter('tech')" ng-show="profile.checkTopics('tech')">Tech</button>
    </div>
  </div>
</div>

<div class="container-fluid">

  <div class="jumbo-profile jumbotron">
    <div class="container-fluid">
      <div class="jumbo-header">
        <h1>Your news</h1>
      </div>
    </div>
  </div>

  <div class="page-header text-center" ng-hide="!(profile.loading)">
    <h2>Loading your articles...</h2>
    <p>If your articles are taking too long too appear, try refreshing the page.</p>
  </div>

  <div class="no-feeds" ng-show="!(profile.loading) && profile.noFeeds">
    <div class="page-header text-center">
      <h2>Looks like you haven't subscribed to any feeds yet</h2>
    </div>
    <div class="add-user-feeds container">
      <h3>Subscribe</h3>
      <div class="row">
        <div class="column col-lg-3" ng-repeat="feed in profile.allFeeds">
          <div class="feed-card">
            <h5>{{feed.name}}</h5>
            <p ng-class="profile.setTopicColor(feed.topic)">{{feed.topic}}</p>
            <button type="button" class="btn btn-default" aria-label="Add" ng-click="profile.newFeeds[feed.key] = feed" ng-disabled="(profile.newFeeds[feed.key])">
              <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
            </button>
            <button type="button" class="btn btn-default" aria-label="Remove" ng-click="profile.removeFeed(feed.key)" ng-disabled="!(profile.newFeeds[feed.key])">
              <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            </button>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="column col-lg-8 col-lg-offset-2">
          <button class="subscribe btn btn-primary" ng-click="profile.subscribe(profile.newFeeds)">
            <h2>Subscribe</h2>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row" ng-show="!(profile.loading) && !(profile.noFeeds)">

    <div class="column col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-repeat="article in profile.articles | orderBy: 'date':true | filter: profile.userSearch | filter: {topic: profile.userFilterTopic} | filter: {pubTitle: profile.userFilterFeed}">
      <div class="content-card" >
        <div class="card-header" ng-class="profile.setTopicColor(article.topic)">
          <h4 ng-click="profile.setFeedFilter(article)"><a href="">{{article.pubTitle}}</a></h4>
        </div>
        <div class="card-text" ng-click="profile.setSpotlight(true, article)">
          <p><a href="{{article.link}}" target="_blank">{{article.title}}</a></p>
          <p>{{article.author}}</p>
          <!-- <p ng-bind-html="article.description"></p> -->
          <p class="date">{{article.date|dateFormat}}</p>
        </div>
      </div>
    </div>
  </div>

  <div class="spotlight" ng-show="profile.spotlight">
    <div class="container">
      <div class="row">
        <div class="column col-lg-6 col-md-6 col-sm-12 col-xs-12">
          <div class="content-card">
            <div class="card-header" ng-class="profile.setTopicColor(profile.spotlightItem.topic)">
              <h4 ng-click="profile.setFeedFilter(article)"><a href="">{{profile.spotlightItem.pubTitle}}</a></h4>
            </div>
            <div class="card-text">
              <p><a href="{{profile.spotlightItem.link}}" target="_blank">{{profile.spotlightItem.title}}</a></p>
              <p>{{profile.spotlightItem.author}}</p>
              <p ng-bind-html="profile.spotlightItem.description"></p>
              <p class="date">{{profile.spotlightItem.date|dateFormat}}</p>
            </div>
          </div>
        </div>
        <div class="column col-lg-6 col-md-6 col-sm-12 col-xs-12 comments-container">
          <h3>Comments</h3>
          <div class="comments">
          </div>
          <form class="form-inline">
            <div class="form-group">
              <input type="text" id="comment-input" class="form-control" placeholder="Type new comment here">
            </div>
            <button class="btn btn-primary">Submit</button>
          </form>
        </div>
      </div>
      <button class="btn btn-danger" ng-click="profile.setSpotlight(false, '')">Close</button>
    </div>
  </div>

</div>

